@model MazOrganization.ViewModels.Dashboard.AddprojectmaininfoViewModel
@{
    ViewData["Title"] = "افزودن پروژه جدید";
}

<div class="d-sm-flex align-items-center justify-content-between mb-4">
    <h1 class="h3 mb-0 text-gray-800">افزودن پروژه جدید</h1>
</div>


<div class="formbold-main-wrapper">

    <div class="formbold-form-wrapper">
        <form id="addprojectform" class="add-form" asp-action="AddProjectMain" asp-controller="Project" method="POST" enctype="multipart/form-data">
            <div class="formbold-steps">
                <ul>
                    <li class="formbold-step-menu1 active">
                        <span>1</span>
                        مشخصات پروژه
                    </li>
                    <li class="formbold-step-menu2">
                        <span>2</span>
                        مشخصات فردی
                    </li>
                    <li class="formbold-step-menu3">
                        <span>3</span>
                        مشخصات زمین
                    </li>
                    <li class="formbold-step-menu4">
                        <span>4</span>
                        فایل های پیوستی
                    </li>

                </ul>
            </div>

            <div class="formbold-form-step-1 active">
                <div class="formbold-input-flex">
                    <div>
                        <label for="firstname" class="formbold-form-label required-field"> عنوان پروژه </label>
                        <input type="text"
                               asp-for="ProjectName"
                               class="formbold-form-input" />
                        <span asp-validation-for="ProjectName" class="text-danger"></span>

                    </div>

                </div>

                <div class="formbold-input-flex">
                    <div>
                        <label for="lastname" class="formbold-form-label"> معرف پروژه </label>

                        @Html.DropDownList("ReferralId",null, htmlAttributes: new { @class = "formbold-form-input" })

                        @Html.ValidationMessageFor(model => model.ReferralId, "", new { @class = "text-danger" })
                    </div>
                    <div>
                        <label for="dob" class="formbold-form-label"> نوع درخواست </label>
                        <input type="text"
                               asp-for="typeofapplication"
                               class="formbold-form-input" />
                        <span asp-validation-for="typeofapplication" class="text-danger"></span>

                    </div>


                </div>
            </div>



            <div class="formbold-form-step-2">
                <div class="formbold-input-flex">
                    <div>
                        <label class="formbold-form-label required-field"> نام و نام خانوادگی </label>
                        <input type="text"
                               asp-for="FullName"
                               class="formbold-form-input" />
                        <span asp-validation-for="FullName" class="text-danger"></span>
                    </div>
                    <div>
                        <label class="formbold-form-label required-field"> کدملی </label>
                        <input type="text"
                               asp-for="NationalCode"
                               class="formbold-form-input" />
                        <span asp-validation-for="NationalCode" class="text-danger"></span>
                    </div>

                </div>

                <div class="formbold-input-flex">

                    <div>
                        <label class="formbold-form-label required-field"> محل صدور </label>
                        <input type="text"
                               asp-for="PlaceIssue"
                               class="formbold-form-input" />
                        <span asp-validation-for="PlaceIssue" class="text-danger"></span>
                    </div>
                    <div>
                        <label class="formbold-form-label required-field"> شماره شناسنامه </label>
                        <input type="text"
                               asp-for="PersonNo"
                               class="formbold-form-input" />
                        <span asp-validation-for="PersonNo" class="text-danger"></span>
                    </div>
                    <div>
                        <label class="formbold-form-label required-field"> نام پدر </label>
                        <input type="text"
                               asp-for="FatherName"
                               class="formbold-form-input" />
                        <span asp-validation-for="FatherName" class="text-danger"></span>
                    </div>
                    <div>
                        <label class="formbold-form-label required-field"> تاریخ تولد </label>
                        <input type="text"
                               asp-for="BirthDate"
                               class="formbold-form-input" />
                        <span asp-validation-for="BirthDate" class="text-danger"></span>
                    </div>
                </div>

                <div class="formbold-input-flex">


                    <div>
                        <label class="formbold-form-label required-field"> شماره همراه </label>
                        <input type="text"
                               asp-for="Number"
                               class="formbold-form-input" />
                        <span asp-validation-for="Number" class="text-danger"></span>
                    </div>

                    <div>
                        <label class="formbold-form-label required-field"> شماره ثابت </label>
                        <input type="text"
                               asp-for="TelNumber"
                               class="formbold-form-input" />
                        <span asp-validation-for="TelNumber" class="text-danger"></span>
                    </div>
                    <div>
                        <label class="formbold-form-label"> ایمیل </label>
                        <input type="text"
                               asp-for="Email"
                               class="formbold-form-input" />
                    </div>
                </div>

            </div>


            <div class="formbold-form-step-3">
                <div class="formbold-input-flex">
                    <div>
                        <label class="formbold-form-label required-field"> آدرس </label>
                        <input type="text"
                               asp-for="Address"
                               class="formbold-form-input" />
                        <span asp-validation-for="Address" class="text-danger"></span>
                    </div>


                </div>

                <div class="formbold-input-flex">

                    <div>
                        <label class="formbold-form-label required-field"> مساحت زمین </label>
                        <input type="text"
                               asp-for="LandArea"
                               class="formbold-form-input" />
                        <span asp-validation-for="LandArea" class="text-danger"></span>
                    </div>
                    <div>
                        <label class="formbold-form-label"> زیربنا </label>
                        <input type="text"
                               asp-for="Foundation"
                               class="formbold-form-input" />
                    </div>
                    <div>
                        <label class="formbold-form-label"> نوع زمین </label>
                        <input type="text"
                               asp-for="LandType"
                               class="formbold-form-input" />
                    </div>
                    <div>
                        <label class="formbold-form-label"> بخش ثبتی </label>
                        <input type="text"
                               asp-for="Registrationِepartment"
                               class="formbold-form-input" />
                    </div>
                    <div>
                        <label class="formbold-form-label"> مفروز </label>
                        <input type="text"
                               asp-for="Assumed"
                               class="formbold-form-input" />
                    </div>
                </div>

                <div class="formbold-input-flex">


                    <div>
                        <label class="formbold-form-label"> قطعه </label>
                        <input type="text"
                               asp-for="Piece"
                               class="formbold-form-input" />
                    </div>

                    <div>
                        <label class="formbold-form-label"> اصلی </label>
                        <input type="text"
                               asp-for="Main"
                               class="formbold-form-input" />
                    </div>
                    <div>
                        <label class="formbold-form-label"> فرعی </label>
                        <input type="text"
                               asp-for="Sub"
                               class="formbold-form-input" />
                    </div>
                    <div>
                        <label class="formbold-form-label"> شماره قرارداد </label>
                        <input type="text"
                               asp-for="ContractNo"
                               class="formbold-form-input" />
                    </div>
                </div>

                <div class="formbold-input-flex">


                    <div>
                        <label class="formbold-form-label"> واگذر کننده </label>
                        <input type="text"
                               asp-for="Assignor"
                               class="formbold-form-input" />
                    </div>

                    <div>
                        <label class="formbold-form-label"> کدیکتا </label>
                        <input type="text"
                               asp-for="YektaCode"
                               class="formbold-form-input" />
                    </div>

                </div>
            </div>


            <div class="formbold-form-step-4">
                <div id="files">
                    
                </div>
                <div class="formbold-input-flex">
                    <div>
                        <button type="button" class="btn btn-primary" onclick="addFile()">افزودن فایل جدید</button>
                        @* <button class="add-service-btn" type="button" id="addNewUpload">افزودن فایل جدید</button> *@
                    </div>
                </div>
            </div>

            <div class="formbold-form-btn-wrapper">
                <button class="formbold-back-btn">
                    بازگشت
                </button>

                <button class="formbold-btn">
                    ادامه

                </button>
            </div>
        </form>
    </div>
</div>
<style>
    .required-field::after {
        content: " *";
        color: red;
    }

    .formbold-main-wrapper {
        display: flex;
    }

    .formbold-form-wrapper {
        width: 100%;
    }

    .formbold-steps {
        padding-bottom: 18px;
        margin-bottom: 35px;
        border-bottom: 1px solid #DDE3EC;
    }

        .formbold-steps ul {
            padding: 0;
            margin: 0;
            list-style: none;
            display: flex;
            gap: 40px;
            justify-content: center;
        }

        .formbold-steps li {
            display: flex;
            align-items: center;
            gap: 14px;
            font-weight: 500;
            font-size: 16px;
            line-height: 24px;
            color: #536387;
        }

            .formbold-steps li span {
                display: flex;
                align-items: center;
                justify-content: center;
                background: #DDE3EC;
                border-radius: 50%;
                width: 36px;
                height: 36px;
                font-weight: 500;
                font-size: 16px;
                line-height: 24px;
                color: #536387;
            }

            .formbold-steps li.active {
                color: #07074D;
            }

                .formbold-steps li.active span {
                    background: #6A64F1;
                    color: #FFFFFF;
                }

    .formbold-input-flex {
        display: flex;
        gap: 20px;
        margin-bottom: 22px;
    }

        .formbold-input-flex > div {
            width: 100%;
        }

    .formbold-form-input {
        width: 100%;
        padding: 13px 22px;
        border-radius: 5px;
        border: 1px solid #DDE3EC;
        background: #FFFFFF;
        font-weight: 500;
        font-size: 16px;
        color: #536387;
        outline: none;
        resize: none;
    }

        .formbold-form-input:focus {
            border-color: #6a64f1;
            box-shadow: 0px 3px 8px rgba(0, 0, 0, 0.05);
        }

    .formbold-form-label {
        color: #07074D;
        font-weight: 500;
        font-size: 14px;
        line-height: 24px;
        display: block;
        margin-bottom: 10px;
    }

    .formbold-form-confirm {
        border-bottom: 1px solid #DDE3EC;
        padding-bottom: 35px;
    }

        .formbold-form-confirm p {
            font-size: 16px;
            line-height: 24px;
            color: #536387;
            margin-bottom: 22px;
            width: 75%;
        }

        .formbold-form-confirm > div {
            display: flex;
            gap: 15px;
        }

    .formbold-confirm-btn {
        display: flex;
        align-items: center;
        gap: 10px;
        background: #FFFFFF;
        border: 0.5px solid #DDE3EC;
        border-radius: 5px;
        font-size: 16px;
        line-height: 24px;
        color: #536387;
        cursor: pointer;
        padding: 10px 20px;
        transition: all .3s ease-in-out;
    }

    .formbold-confirm-btn {
        box-shadow: 0px 1px 2px rgba(0, 0, 0, 0.12);
    }

        .formbold-confirm-btn.active {
            background: #6A64F1;
            color: #FFFFFF;
        }

    .formbold-form-step-1,
    .formbold-form-step-2,
    .formbold-form-step-3,
    .formbold-form-step-4,
    .formbold-form-step-5,
    .formbold-form-step-6,
    .formbold-form-step-7 {
        display: none;
    }

        .formbold-form-step-1.active,
        .formbold-form-step-2.active,
        .formbold-form-step-3.active,
        .formbold-form-step-4.active,
        .formbold-form-step-5.active,
        .formbold-form-step-6.active,
        .formbold-form-step-7.active {
            display: block;
        }

    .formbold-form-btn-wrapper {
        display: flex;
        align-items: center;
        justify-content: flex-end;
        gap: 25px;
        margin-top: 25px;
    }

    .formbold-back-btn {
        cursor: pointer;
        background: #f8f9fc;
        border: none;
        color: #07074D;
        font-weight: 500;
        font-size: 16px;
        line-height: 24px;
        display: none;
    }

        .formbold-back-btn.active {
            display: block;
        }

    .formbold-btn {
        display: flex;
        align-items: center;
        gap: 5px;
        font-size: 16px;
        border-radius: 5px;
        padding: 10px 25px;
        border: none;
        font-weight: 500;
        background-color: #6A64F1;
        color: white;
        cursor: pointer;
    }

        .formbold-btn:hover {
            box-shadow: 0px 3px 8px rgba(0, 0, 0, 0.05);
        }

    .btn_round {
        width: 35px;
        height: 35px;
        display: inline-block;
        border-radius: 50%;
        text-align: center;
        line-height: 35px;
        margin-left: 10px;
        border: 1px solid #ccc;
        cursor: pointer;
    }

        .btn_round:hover {
            color: #fff;
            background: #6b4acc;
            border: 1px solid #6b4acc;
        }

    .btn_content_outer {
        display: inline-block;
        width: 85%;
    }

    .close_c_btn {
        width: 30px;
        height: 30px;
        position: absolute;
        right: 10px;
        top: 0px;
        line-height: 30px;
        border-radius: 50%;
        background: #ededed;
        border: 1px solid #ccc;
        color: #ff5c5c;
        text-align: center;
        cursor: pointer;
    }

    .add_icon {
        padding: 10px;
        border: 1px dashed #aaa;
        display: inline-block;
        border-radius: 50%;
        margin-right: 10px;
    }

    .add_group_btn {
        display: flex;
    }

        .add_group_btn i {
            font-size: 32px;
            display: inline-block;
            margin-right: 10px;
        }

        .add_group_btn span {
            margin-top: 8px;
        }

    .add_group_btn,
    .clone_sub_task {
        cursor: pointer;
    }

    .sub_task_append_area .custom_square {
        cursor: move;
    }

    .del_btn_d {
        display: inline-block;
        position: absolute;
        right: 20px;
        border: 2px solid #ccc;
        border-radius: 50%;
        width: 40px;
        height: 40px;
        line-height: 40px;
        text-align: center;
        font-size: 18px;
    }
</style>
<script>



    const stepMenuOne = document.querySelector('.formbold-step-menu1')
    const stepMenuTwo = document.querySelector('.formbold-step-menu2')
    const stepMenuThree = document.querySelector('.formbold-step-menu3')
    const stepMenuFour = document.querySelector('.formbold-step-menu4')


    const stepOne = document.querySelector('.formbold-form-step-1')
    const stepTwo = document.querySelector('.formbold-form-step-2')
    const stepThree = document.querySelector('.formbold-form-step-3')
    const stepFour = document.querySelector('.formbold-form-step-4')


    const formSubmitBtn = document.querySelector('.formbold-btn')
    const formBackBtn = document.querySelector('.formbold-back-btn')


    formSubmitBtn.addEventListener("click", function (event) {
        event.preventDefault()
        if (stepMenuOne.className == 'formbold-step-menu1 active') {
            event.preventDefault()

            stepMenuOne.classList.remove('active')
            stepMenuTwo.classList.add('active')

            stepOne.classList.remove('active')
            stepTwo.classList.add('active')

            formBackBtn.classList.add('active')
            formBackBtn.addEventListener("click", function (event) {
                event.preventDefault()

                stepMenuOne.classList.add('active')
                stepMenuTwo.classList.remove('active')

                stepOne.classList.add('active')
                stepTwo.classList.remove('active')

                formBackBtn.classList.remove('active')

            })

        } else if (stepMenuTwo.className == 'formbold-step-menu2 active') {
            event.preventDefault()

            stepMenuTwo.classList.remove('active')
            stepMenuThree.classList.add('active')

            stepTwo.classList.remove('active')
            stepThree.classList.add('active')

            formBackBtn.classList.add('active')
            formBackBtn.addEventListener("click", function (event) {
                event.preventDefault()

                stepMenuTwo.classList.add('active')
                stepMenuOne.classList.remove('active')
                stepMenuThree.classList.remove('active')

                stepTwo.classList.add('active')
                stepOne.classList.remove('active')
                stepThree.classList.remove('active')

                formBackBtn.classList.add('active')
                formBackBtn.addEventListener("click", function (event) {
                    event.preventDefault()

                    stepMenuOne.classList.add('active')
                    stepMenuTwo.classList.remove('active')

                    stepOne.classList.add('active')
                    stepTwo.classList.remove('active')

                    formBackBtn.classList.remove('active')

                })
            })

        } else if (stepMenuThree.className == 'formbold-step-menu3 active') {
            event.preventDefault()

            stepMenuThree.classList.remove('active')
            stepMenuFour.classList.add('active')

            stepThree.classList.remove('active')
            stepFour.classList.add('active')
            formSubmitBtn.innerHTML = "افزودن پروژه";

            formBackBtn.classList.add('active')
            formBackBtn.addEventListener("click", function (event) {
                event.preventDefault()

                stepMenuFour.classList.remove('active')
                stepMenuThree.classList.add('active')
                stepMenuOne.classList.remove('active')
                stepMenuTwo.classList.remove('active')

                stepThree.classList.add('active')
                stepFour.classList.remove('active')
                stepOne.classList.remove('active')
                stepTwo.classList.remove('active')
                formSubmitBtn.innerHTML = "ادامه";

                formBackBtn.classList.add('active')
                formBackBtn.addEventListener("click", function (event) {
                    event.preventDefault()

                    stepMenuTwo.classList.add('active')
                    stepMenuOne.classList.remove('active')
                    stepMenuThree.classList.remove('active')

                    stepTwo.classList.add('active')
                    stepOne.classList.remove('active')
                    stepThree.classList.remove('active')

                    formBackBtn.classList.add('active')
                    formBackBtn.addEventListener("click", function (event) {
                        event.preventDefault()

                        stepMenuOne.classList.add('active')
                        stepMenuTwo.classList.remove('active')

                        stepOne.classList.add('active')
                        stepTwo.classList.remove('active')

                        formBackBtn.classList.remove('active')

                    })
                })
            })

        } else if (stepMenuFour.className == 'formbold-step-menu4 active') {
            event.preventDefault()

            document.querySelector('form.add-form').submit();

        }
    })



</script>
<style>
    .choose-file-title {
        max-width: 50%;
    }

    .choose-file-wrapper {
        max-width: 315px;
        padding-bottom: .35rem;
    }

    .h3-service-title {
        font-size: 1.4rem;
        border-bottom: 2px solid #cecccc;
        margin-bottom: 1.2rem !important;
        padding-bottom: 0.5rem;
    }

    .remove-field-wrapper {
        width: fit-content !important;
        height: fit-content;
        display: flex;
        padding-bottom: .3rem;
    }

    .remove-field-wrapperUpload {
        height: fit-content;
        display: flex;
        padding-bottom: .3rem;
    }

    .remove-fieldUpload {
        padding: .7rem .8rem;
        background-color: #dc3545;
        border-radius: 50%;
        transition: all 200ms;
    }

    .remove-field {
        padding: 0.7rem 0.78rem;
        background-color: #dc3545;
        border-radius: 50%;
        transition: all 200ms;
    }

        .remove-field:hover, .remove-fieldUpload:hover {
            background-color: #bb2d3b;
        }

        .remove-field i, .remove-fieldUpload i {
            color: #fff;
        }

    #dynamicContainer {
        align-items: end;
    }

    .service-wrapper {
        align-items: end;
    }

    .add-service-btn {
        font-size: 16px;
        border-radius: 5px;
        padding: 10px 25px;
        border: none;
        font-weight: 500;
        border: 2px solid;
        background-color: transparent;
        border-color: #6A64F1;
        color: #6A64F1;
        transition: all 200ms;
    }

        .add-service-btn:hover {
            background-color: #6A64F1;
            color: #fff;
            ُ
        }

    input::file-selector-button::after {
        content: "آپلود";
    }

    input::file-selector-button::before {
        content: "";
        background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='%230964B0'%3E%3Cpath d='M18 15v3H6v-3H4v3c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2v-3h-2zM7 9l1.41 1.41L11 7.83V16h2V7.83l2.59 2.58L17 9l-5-5-5 5z'/%3E%3C/svg%3E");
    }

    input::file-selector-button {
        font-weight: bold;
        color: #6A64F1;
        padding: 0.5rem;
        border: thin solid grey;
        border-radius: 3px;
    }
</style>


@section Scripts {
    



    <script>
        function addFile() {
            var index = $("#files .service-wrapper").length;
            var html = `
                        
                                <div class="service-wrapper formbold-input-flex">
                                        <div class="choose-file-title">
                                            <label class="formbold-form-label required-field"> عنوان فایل</label>
                                                    <input type="text" name="ProjectFiles[${index}].FileTittle" class="formbold-form-input" />
                                        </div>
                                        <div class="choose-file-wrapper">
                                                    <input type="file" name="ProjectFiles[${index}].formFile" class="inputfile">
                                        </div>
                                        <button type="button" class="btn btn-danger" onclick="removeFile(this)">حذف</button>
                                    </div>
                    `;
            $("#files").append(html);
        }


        function removeFile(button) {
            $(button).parent().remove();
        }
    </script>




   
}





